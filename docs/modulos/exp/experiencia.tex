
\subsection{Análisis}

 Este apartado contiene el análisis requerido para la elaboración de módulo de experiencia,
 contiene la especificación del alcance de este módulo, la descripción de las funcionalidades
 a desarrollar, la reglas de negocio que rigen el comportamiento del módulo, y por último la
 especificación de los casos de uso a los que brinda soporte.

\subsubsection{Esquema de experiencia}

 El esquema de experiencia le proporciona al \refElem{aAdministrador} y a los \refElem[Profesores]%
 {aProfesor} un mecanismo mediante el cual pueden configurar la forma en que se obtienen los puntos
 de experiencia, la cantidad a otorgar, el número de puntos de cada nivel y finalmente la
 visualización del nivel y de los puntos de cada usuario.\\

 \noindent
 Las configuraciones fueron organizadas en dos grupos: las {\it configuraciones a
 nivel plataforma} las cuales definen valores de forma global, y las {\it configuraciones a nivel
 curso} las cuales definen valores para un curso en específico. A continuación se describen cada
 uno de los grupos.\\

\subsubsection{Submódulo de niveles}
\subsubsection{Funcionalidades}

% \subsubsection{Esquema de experiencia.}

 % El esquema de experiencia es la configuración sobre cómo funciona el sistema
 % de puntos de experiencia, incluyendo la cantidad de experiencia que tiene
 % cada nivel, el tipo de incremento en los puntos de experiencia nivel a nivel,
 % las restricciones sobre la experiencia y la forma en que se otorgarán los puntos.

% \subsubsection{Niveles.}

 % Es el mecanismo que permite mostrarle a los estudiantes el progreso que han tenido
 % a nivel plataforma mediante el nivel y los puntos de experiencia obtenidos en
 % los cursos, además contiene la configuración para establecer el cómo se verá el
 % nivel y la experiencia obtenida de dicho nivel.

 % Los principios de gamificación a los cuales permite brindarles soporte son:
 % \principioII
 % \principioVI
%
\subsubsection{Reglas de negocio} %========================================================

 En esta sección se especifican todas las reglas de negocio relevantes para el módulo de
 experiencia. Las reglas de negocio que establece moodle son diferenciadas por tener la letra {\it M}
 antecediendo al número consecutivo en su identificador.

    \input{modulos/moodle/BR/moodle} % Archivo de plugin
    \input{modulos/exp/BR/BR-E01} % Restricciones sobre de imagen del nivel.
    \input{modulos/exp/BR/BR-E02} % Permanencia del nivel de experiencia.
    \input{modulos/exp/BR/BR-E03} % Tipos de incremento
    \input{modulos/exp/BR/BR-E04} % Incremento porcentual
    \input{modulos/exp/BR/BR-E05} % Incremento lineal
    \input{modulos/exp/BR/BR-E06} % Eliminación de cursos gamificados
    \input{modulos/exp/BR/BR-E07} % Valores iniciales de experiencia
    \input{modulos/exp/BR/BR-E08} % Valores iniciales de experiencia del curso
    \input{modulos/exp/BR/BR-E09} % Secciones editables de un curso con experiencia
    \input{modulos/exp/BR/BR-E10} % Administración de la experiencia en un curso
    \input{modulos/exp/BR/BR-E11} % Eliminación de secciones con experiencia

    % INPUT: Cursos Igualitarios.
    % INPUT: Otorgar experiencia

\clearpage
\subsubsection{Casos de uso} % ============================================================

 En este apartado se especifican todos los casos de usos contemplados para el módulo de
 experiencia, para cada caso de uso se especifica su tabla de atributos la cual indica que casos
 de prueba deberán ejecutarse correctamente para corroborar la completitud del caso de uso.

\subsubsection*{Diagrama de casos de uso}

 En la figura \ref{exp:usecases} se detalla el diagrama de casos de uso correspondiente al módulo
 de experiencia. Los casos de uso de moodle (en color blanco) son modelados como casos de uso
 abstractos, mientras que los casos de uso del módulo de experiencia son diferenciados por el
 color azul, en total el desarrollo de este módulo consiste en 13 casos de uso principales.

    \addfigure{0.9}{modulos/UseCases}{exp:usecases}{%
        Diagrama de casos de uso del módulo de experiencia}

 \noindent
 Debido a que los plugins a desarrollar son elementos opcionales para Moodle, solo se puede
 acceder a los casos de uso del módulo de experiencia a través de puntos de extensión de los
 casos de uso de moodle. Por otra parte los casos de uso que serán documentados en esta sección
 serán los del módulo de experiencia debido a que Moodle proporciona en su página oficial, guías
 e instructivos como documentación de las funcionalidades que brinda.

    % CASOS DE USO DE MOODLE
    \input{modulos/moodle/CU/CU-M01} % Acceder a la administración del sitio

    % MODULO DE EXPERIENCIA
    \input{modulos/exp/CU/CU-E01}   % Instalar plugin del esquema de experiencia
    \input{modulos/exp/CU/CU-E02}   % Configuraciones generales
    \input{modulos/exp/CU/CU-E02-1} % Configurar visualización de niveles
    \input{modulos/exp/CU/CU-E02-2} % Configurar esquema de experiencia
    \input{modulos/exp/CU/CU-E02-3} % Configurar Eventos de experiencia
    \input{modulos/exp/CU/CU-E03}   % Desinstalar plugin del esquema de experiencia
    \input{modulos/exp/CU/CU-E04}   % Crear un curso gamificado
    \input{modulos/exp/CU/CU-E05}   % Convertir un curso ordinario a uno gamificado
    \input{modulos/exp/CU/CU-E06}   % Convertir Curso gamificado -> curso ordinario
    \input{modulos/exp/CU/CU-E07}   % Administrar Curso gamificado
    \input{modulos/exp/CU/CU-E08}   % Agregar seccion con experiencia
    %\input{modulos/exp/CU/CU-E09}   % Eliminar seccion con experiencia
    \input{modulos/exp/CU/CU-E10}   % Eliminar un curso gamificado
    %\input{modulos/exp/CU/CU-E11}   % Recibir Experiencia                                  %RICARDO: Por qué está comentado este caso de uso?
    \input{modulos/exp/CU/CU-E12}   % Crear cuenta de un usuario gamificado
    \input{modulos/exp/CU/CU-E13}   % Eliminar cuenta de un usuario gamificado

% =========================================================
\clearpage
\subsection{Diseño}

 En esta sección se presenta los distintos diagramas que ayudan a modelar el
 software a desarrollar, de la misma forma todas las decisiones y consideraciones
 relevantes para la implementación de las funcionalidades se encuentra documentada
 en esta sección.

    \input{modulos/exp/diseno}

\begin{comment} % ==================================================================
\subsubsection{Interfaces de Moodle}

    % INTERFACES DE MOODLE
    \input{modulos/moodle/IU/IU-M00}  % Tablero (Dashboard)
    \input{modulos/moodle/IU/IU-M00a} % Form: Selector de archivos
    \input{modulos/moodle/IU/IU-M00b} % Login

    \input{modulos/moodle/IU/IU-M01}  % Administración del sitio
    \input{modulos/moodle/IU/IU-M01a} % Administración del sitio plugins
    \input{modulos/moodle/IU/IU-M01b} % Administración del sitio usuarios
    \input{modulos/moodle/IU/IU-M01c} % Administración del sitio Cursos

    \input{modulos/moodle/IU/IU-M02}  % Instalación de Plugin
    \input{modulos/moodle/IU/IU-M02a} % Validación de archivo ZIP
    \input{modulos/moodle/IU/IU-M02b} % Comprobación de plugibs
    \input{modulos/moodle/IU/IU-M02c} % Cancelación Instalación Plugin
    \input{modulos/moodle/IU/IU-M02d} % Resultado Instalación Plugin

    \input{modulos/moodle/IU/IU-M03}  %
    \input{modulos/moodle/IU/IU-M03a} %

    \input{modulos/moodle/IU/IU-M04}  %
    \input{modulos/moodle/IU/IU-M04a} %

    \input{modulos/moodle/IU/IU-M05}  %
    \input{modulos/moodle/IU/IU-M05a} %
    \input{modulos/moodle/IU/IU-M05b} %
    \input{modulos/moodle/IU/IU-M05c} %

    \input{modulos/moodle/IU/IU-M06}  % Cursos y Categorías
    \input{modulos/moodle/IU/IU-M06a} % Confirmación eliminar curso
    \input{modulos/moodle/IU/IU-M06b} % Estado de eliminación de un curso
    \input{modulos/moodle/IU/IU-M06c} % Curso de moodle

    \input{modulos/moodle/IU/IU-M07} % Pagina Inicial del Sitio

\subsubsection{Interfaces del módulo de experiencia}

    \input{modulos/exp/IU/IU-E01}  % Configuraciones
    \input{modulos/exp/IU/IU-E02}  % Configuraciones Generales
    \input{modulos/exp/IU/IU-E03}  % Configuraciones Visuales
    \input{modulos/exp/IU/IU-E03a} % Configuraciones Mod Exp desactivado
    \input{modulos/exp/IU/IU-E04}  % Configuraciones Esquema
    \input{modulos/exp/IU/IU-E05}  % Configuraciones de Eventos
    \input{modulos/exp/IU/IU-E05a} % Configuraciones Events desativados
    \input{modulos/exp/IU/IU-E06}  % Curso Gamificado
    \input{modulos/exp/IU/IU-E06a}  % Curso Gamificado
    \input{modulos/exp/IU/IU-E06b} % Curso Gamificado (editing)

    %\input{modulos/modExpIU/IU-E04} % Configuraciones de Comportamiento
    %\input{modulos/modExpIU/IU-E05} % Configuraciones de eventos

\subsubsection{Diseño de plugins} % TODO CHANGE FOR INPUTS
\subsubsection{Diagrama de componentes} % TODO CHANGE FOR INPUTS
\subsubsection{Diagrama de clases} % TODO CHANGE FOR INPUTS

\end{comment} % >>>>>>> d14b3c5df86665f3cc11f090d68bc3001772b4f5 ============asdsds

\subsection{Pruebas}

    \input{modulos/exp/pruebas}

\begin{comment}
\section{Submódulos}

\subsubsection{Esquema configurable}

 Se quiere que el administrador de la página pueda configurar:
 \begin{quote}
 \begin{itemize}
    \item{La ''\hyperref[table:METerminosExperiencia1]{experiencia del nivel}'' del nivel 1.}
    \item {El tipo de incremento.}
    \item {La cantidad de los puntos de experiencia en el incremento.}
    \item {La ''\hyperref[table:METerminosExperiencia1]{experiencia otorgada}'' que da resolver cualquier actividad.}
 \end{itemize}
 \end{quote}

\subsection{Submódulo de Niveles}

 Presenta a los estudiantes su progreso utilizando un sistema de niveles que se van alcanzado
 obteniendo puntos de experiencia. Al alcanzar un nuevo nivel la barra que muestra la
 cantidad de experiencia del nivel se actualizará.
 % y cada vez que se alcanza un nivel, los puntos de experiencia se regresan a cero.

    \begin{quote}
    \begin{description}
    \item[Objetivo] \hfill\\
        Mostrar a los estudiantes el nivel actual de experiencia que tienen y el avance que tienen de ese mismo nivel.
        %Mostrar el nivel actual que tienen los estudiantes, así como el avance que tienen en ese mismo nivel.

        %Proveer información al estudiante que indique la cantidad de tiempo y esfuerzo que le ha dedicado a la plataforma.

    \item[Principios a los que brinda soporte:] \hfill
        \begin{itemize}
            \item 2 \principioII
            \item 6 \principioVI
        \end{itemize}
    \end{description}
    \end{quote}

%\begin{comment}%

\subsection{Submódulo de Barra de Progreso}

Muestra al estudiante el progreso que lleva en un curso usando un valor de 0\% a 100\% dependiendo de los ejercicios que haya hecho del curso o del tiempo que haya transcurrido.

    \begin{quote}
    \begin{description}
        \item[Objetivo] \hfill\\
            Proveer información al estudiante que indique el tiempo y esfuerzo que le ha dedicado a un curso, así como el que le falta por dedicar.

        \item[Principios a los que brinda soporte:] \hfill
        \begin{itemize}
            \item 2 \principioII
        \end{itemize}
    \end{description}
    \end{quote}
%\end{comment}%

\subsection{Diagrama de Clases}

    En la figura \ref{fig:classesXP} se muestra el diagrama de clases, los archivos {\it lib, events, settings, version} y los {\it módulos AMD} son representados mediante el uso de clases. Para facilitar la lectura del diagrama se representa a moodle como un paquete completo, el cual lee los distintos archivos y clases que requiere el plugin para funcionar.

%    \addfigure{1}{diagrams/classesExp}{fig:classesXP}{Diagrama de clases del Módulo de Experiencia}
\clearpage

\subsection{Diagrama de componentes}

    En la figura \ref{fig:bloques1} se muestra el diagrama de componentes del Módulo de experiencia que contiene como interactúa el Módulo con la plataforma Moodle.

%    \addfigure{1}{diagrams/bloques1}{fig:bloques1}{Diagrama de componentes del Módulo de Experiencia}

\clearpage
\subsection*{DS-E2: Crear curso con experiencia}

    Para diseñar la forma en que se ejecuta el caso de uso CU-E2, se tomó en consideración el flujo normal de eventos emitidos cuando se crea un curso en moodle. Los eventos emitidos en orden cronológico son {\it course\_created}, {\it course\_section\_created} y {\it enrol\_instance\_created}.\\

    \noindent En la figura \ref{ds:e2} se detalla la interacción entre el core de moodle, los eventos emitidos, y las clases del plugin {\bf Format Gamedle}.

\end{comment}
